# ==== Core runtime settings ====
# Timezone for cron scheduler logs and triggers (recovery is per-user time-based via lastRecoveryAt)
TZ=Asia/Shanghai

# ==== Hourly recovery job (new) ====
# Enable the hourly credit recovery cron job (runs at 5 minutes past every hour)
ENABLE_HOURLY_RECOVERY=true

# Page size per batch when scanning active users
HOURLY_RECOVERY_PAGE_SIZE=500

# Conservative concurrency for calling autoRecoverCredits
HOURLY_RECOVERY_CONCURRENCY=5

# ==== Daily reset job (legacy, keep disabled) ====
# Keep legacy daily reset disabled. Set to true ONLY if you need the old behavior.
ENABLE_DAILY_RESET=false

# ==== Payment Provider Configuration ====
# Choose payment provider: 'stripe', 'antom', or 'mock'
NEXT_PUBLIC_PAYMENT_PROVIDER=stripe

# ==== Stripe Payment Configuration ====
# Get these from https://dashboard.stripe.com/
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key_here
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key_here

# Webhook secret - get from Stripe CLI or Dashboard
# For local dev: Run `stripe listen --forward-to localhost:3005/api/orders/pay/stripe/webhook`
# CLI will output: "Your webhook signing secret is whsec_..."
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# Public base URL for payment callbacks (required for production)
# For local dev with Stripe CLI, use your local URL
# For production, use your domain
PUBLIC_BASE_URL=http://localhost:3005
# PUBLIC_BASE_URL=https://your-domain.com

# ==== Antom Payment Configuration (OPTIONAL - Currently Disabled) ====
# Uncomment these if you want to use Antom payments
# ANTOM_GATEWAY_URL=https://open-na.alipay.com
# ANTOM_CLIENT_ID=your_antom_client_id
# ANTOM_MERCHANT_PRIVATE_KEY=your_merchant_private_key
# ANTOM_ALIPAY_PUBLIC_KEY=your_alipay_public_key
# ANTOM_KEY_VERSION=1
# ANTOM_PAYMENT_CURRENCY=USD
# ANTOM_PAYMENT_METHOD=CONNECT_WALLET
# PUBLIC_NOTIFY_URL=https://your-public-url.com
# PUBLIC_APP_URL=http://localhost:3005

# ==== Database / Prisma ====
# Serverless (Vercel) 推荐：运行时走 Supabase 连接池 (PgBouncer 端口 6543)，禁用预编译语句并限制连接数
# 注意：迁移/初始化脚本仍使用直连 5432（见 DIRECT_URL）
# 示例：
# DATABASE_URL=postgresql://USER:PASSWORD@db.<project>.supabase.co:6543/postgres?schema=public&sslmode=require&pgbouncer=true&connection_limit=1
# DIRECT_URL=postgresql://USER:PASSWORD@db.<project>.supabase.co:5432/postgres?schema=public&sslmode=require

# ==== Read Replica (读写分离) ====
# 副本数据库URL，用于只读操作，分散主库压力
# 支持多个副本URL（用逗号分隔），系统会随机选择一个
# 如果不配置此项，所有读操作会自动降级到主库
# 示例（单个副本）：
# REPLICA_DATABASE_URL=postgresql://postgres:PASSWORD@db.<project>-rr-ap-southeast-1.supabase.co:6543/postgres?schema=public&sslmode=require&pgbouncer=true&connection_limit=1
# 示例（多个副本，负载均衡）：
# REPLICA_DATABASE_URL=postgresql://postgres:PASSWORD@db.<project>-rr-ap-southeast-1.supabase.co:6543/postgres?pgbouncer=true,postgresql://postgres:PASSWORD@db.<project>-rr-us-west-1.supabase.co:6543/postgres?pgbouncer=true

# ==== NextAuth (placeholder values) ====
# NEXTAUTH_URL=http://localhost:3000
# NEXTAUTH_SECRET=changeme-dev-secret

# ==== Optional logging ====
# LOG_LEVEL=info
