# ==== Core runtime settings ====
# Timezone for cron scheduler logs and triggers (recovery is per-user time-based via lastRecoveryAt)
TZ=Asia/Shanghai

# ==== Hourly recovery job (new) ====
# Enable the hourly credit recovery cron job (runs at 5 minutes past every hour)
ENABLE_HOURLY_RECOVERY=true

# Page size per batch when scanning active users
HOURLY_RECOVERY_PAGE_SIZE=500

# Conservative concurrency for calling autoRecoverCredits
HOURLY_RECOVERY_CONCURRENCY=5

# ==== Daily reset job (legacy, keep disabled) ====
# Keep legacy daily reset disabled. Set to true ONLY if you need the old behavior.
ENABLE_DAILY_RESET=false

# ==== Database / Prisma ====
# Serverless (Vercel) 推荐：运行时走 Supabase 连接池 (PgBouncer 端口 6543)，禁用预编译语句并限制连接数
# 注意：迁移/初始化脚本仍使用直连 5432（见 DIRECT_URL）
# 示例：
# DATABASE_URL=postgresql://USER:PASSWORD@db.<project>.supabase.co:6543/postgres?schema=public&sslmode=require&pgbouncer=true&connection_limit=1
# DIRECT_URL=postgresql://USER:PASSWORD@db.<project>.supabase.co:5432/postgres?schema=public&sslmode=require

# ==== Read Replica (读写分离) ====
# 副本数据库URL，用于只读操作，分散主库压力
# 支持多个副本URL（用逗号分隔），系统会随机选择一个
# 如果不配置此项，所有读操作会自动降级到主库
# 示例（单个副本）：
# REPLICA_DATABASE_URL=postgresql://postgres:PASSWORD@db.<project>-rr-ap-southeast-1.supabase.co:6543/postgres?schema=public&sslmode=require&pgbouncer=true&connection_limit=1
# 示例（多个副本，负载均衡）：
# REPLICA_DATABASE_URL=postgresql://postgres:PASSWORD@db.<project>-rr-ap-southeast-1.supabase.co:6543/postgres?pgbouncer=true,postgresql://postgres:PASSWORD@db.<project>-rr-us-west-1.supabase.co:6543/postgres?pgbouncer=true

# ==== NextAuth (placeholder values) ====
# NEXTAUTH_URL=http://localhost:3000
# NEXTAUTH_SECRET=changeme-dev-secret

# ==== Optional logging ====
# LOG_LEVEL=info
